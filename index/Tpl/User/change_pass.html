<include file="Public:header"/>
<script type="text/javascript" src="__PUBLIC__/js/jquery-1.8.2.min.js"></script>
<div class="container">
	<div class="wrap clearfix">
		<div class="sidebar">
			<h2 class="colPicTitle">用户中心<em>user center</em></h2>
			<include file="Public:user_menu" index='2' />
		</div>
		<div class="main">
			<div class="form-login">
			<p>修改密码</p>
			<form action="" name="form_message" method="post">
				<input name="type" type="hidden" value="{$type}" />
				<ul>
					<li class="field">
						<div class="input clearfix">
							<label>原密码</label>
							<input name="old_pwd" type="password" size="20" maxlength="50" class="text" />
						</div>
					</li>
					<li class="field">
						<div class="input clearfix">
							<label>新密码</label>
							<input name="pwd" type="password" size="20" maxlength="50" class="text" />
						</div>
					</li>
					<li class="field">
						<div class="input clearfix">
							<label>再次输入</label>
							<input name="pwd2" type="password" size="20" maxlength="50" class="text" />
						</div>
					</li>
			
					<li class="submit-field">
						<div class="input clearfix"><input type="button" value="更改密码" id="btn-reg" class="btn-reg" /></div>
					</li>
					
				</ul>
			</form>
			<script type="text/javascript">
		    $(function(){
		      var url="{:U('User/doChangePass')}";
		      var success_url="{:U('User/index')}";
		      $("#btn-reg").click(function(){
		      	 var old_pass=$("input[name=old_pwd]").val();
		      	 var pwd=$("input[name=pwd]").val();
		      	 var pwd2=$("input[name=pwd2]").val();
		      	
		      	if($.trim(old_pass).length<8){
		      	 	alert("原密码不能为空");
		      	 	$("input[name=old_pass]").focus();
		      	 	return false;
		      	 }
		      	 if($.trim(pwd).length<8){
		      	 	alert("密码不能少于8位");
		      	 	$("input[name=pwd]").focus();
		      	 	return false;
		      	 }
		      	 if($.trim(pwd)!=$.trim(pwd2)){
		      	 	alert("两次输入的密码不一致，请确认");
		      	 	$("input[name=pwd2]").focus();
		      	 	return false;
		      	 }
		      	
		      	 var data={"old_pass":old_pass,"new_pass":pwd};

		      	 $.ajax({url:url,data:data,dataType: "json",type:"POST",success:function(data){
		      	 	alert(data.returnInfo);
		          }});
		      });
		    })
		    </script>
		</div>
		</div>
		
	</div>
</div>
<include file="Public:footer"/>